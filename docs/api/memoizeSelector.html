
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>memoizeSelector Â· Comfy Redux Selectors</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-algolia/plugin-algolia.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../build/gitbook.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="createStateSelector.html" />
    
    
    <link rel="prev" href="composeSelectors.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Read Me
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Usage</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../usage/path-selectors.html">
            
                <a href="../usage/path-selectors.html">
            
                    
                    Path selectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../usage/dependent-selectors.html">
            
                <a href="../usage/dependent-selectors.html">
            
                    
                    Dependent selectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../usage/configurable-selectors.html">
            
                <a href="../usage/configurable-selectors.html">
            
                    
                    Configurable selectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../usage/with-mapStateToProps.html">
            
                <a href="../usage/with-mapStateToProps.html">
            
                    
                    With mapStateToProps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../usage/composing-selectors.html">
            
                <a href="../usage/composing-selectors.html">
            
                    
                    Composing selectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../usage/comparing-with-reselect.html">
            
                <a href="../usage/comparing-with-reselect.html">
            
                    
                    Comparing with reselect
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">API</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="createSelector.html">
            
                <a href="createSelector.html">
            
                    
                    createSelector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="withOptions.html">
            
                <a href="withOptions.html">
            
                    
                    withOptions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="withProps.html">
            
                <a href="withProps.html">
            
                    
                    withProps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="withState.html">
            
                <a href="withState.html">
            
                    
                    withState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="combineSelectors.html">
            
                <a href="combineSelectors.html">
            
                    
                    combineSelectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="composeSelectors.html">
            
                <a href="composeSelectors.html">
            
                    
                    composeSelectors
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.7" data-path="memoizeSelector.html">
            
                <a href="memoizeSelector.html">
            
                    
                    memoizeSelector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="createStateSelector.html">
            
                <a href="createStateSelector.html">
            
                    
                    createStateSelector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="createPropsSelector.html">
            
                <a href="createPropsSelector.html">
            
                    
                    createPropsSelector
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >memoizeSelector</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="memoizeselectorselector"><code>memoizeSelector(selector)</code></h1>
<p>Used internally by <code>createSelector</code> and <code>combineSelectors</code> for memoizing a selectors. Under the hood, this function use <code>WeakMap</code> to cache the value. It will only recompute values when <code>state</code> changes. It ignores state mutations. Although typically selectors only receive two arguments, <code>state</code> and <code>ownProps</code>, it will cache values with an infinite number of arguments. It memoizes each argument based on object equivalence, meaning, a cache hit requires the <em>exact</em> same arguments be passed.</p>
<h2 id="basic-usage">Basic usage</h2>
<p><code>memoizeSelector</code> expects to receive selector function. It returns a selector that will memoize return values based on the provided arguments. Each argument provided to your selector must be a valid <code>WeakMap</code> key. The most common arguments a selector will receive are <code>state</code> and <code>ownProps</code>. However, you may pass an infinite number of valid arguments. You will likely see some performance issues if you have selectors with many thousands of arguments (ha ha), so don&apos;t do that.</p>
<p>In the example below we&apos;re memoizing a simple selector. Normally you would only memoize a selector that contained a loop of some sort. If you are using <code>createSelector</code> with a results function, or if you are using <code>combineSelectors</code>, your selector is already being memoized. You might rarely need to manually memoize selectors.</p>
<p>There are some things to keep in mind:</p>
<ol>
<li><strong>mutaton is ignored</strong> &#x2014; if you change any property of an object it will still be the <em>same</em> object. Because the <code>WeakMap</code> cache matches by the object itself, not any particular value in the object, you must pass a different object to get a different result.</li>
<li><strong>passing more args will trigger a cache miss</strong> &#x2014; if you pass a new argument, you will get a new result. Because the memoization function doens&apos;t know which arguments are being used to computer the value, it must compute a whole new value every time it see something new. Be careful, though! Notice example 4.</li>
<li><strong>passing &quot;different&quot; args will trigger a cache miss</strong> &#x2014; even if two objects have the same values, they are technically different objects and will trigger a cache miss. This is important to keep in mind when you are memoizing selectors in scenarios where either <code>state</code> or <code>ownProps</code> change frequently. There may be many cases where <code>state</code> or <code>ownProps</code> contain the same values but are technically different objects.</li>
<li><strong>passing the same args will return the same value forever</strong> &#x2014; while it may not be obvious at first, notice below how the initial call to <code>selectName(state)</code> effectively caches that result until that state is destroyed. In practice, this will rarely bite you. However, if you are in the habit of mutating the state rather than replacing it, <code>memoizeSelector</code> will ignore you... forever.</li>
</ol>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> memoizeSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;@comfy/redux-selectors&apos;</span>

<span class="token keyword">const</span> selectName <span class="token operator">=</span> <span class="token function">memoizeSelector</span><span class="token punctuation">(</span>state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// ---</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&apos;billy&apos;</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> ownProps <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 1. mutaton is ignored</span>
<span class="token function">selectName</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// =&gt; billy</span>
state<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&apos;sally&apos;</span>
<span class="token function">selectName</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// =&gt; billy</span>

<span class="token comment" spellcheck="true">// 2. passing more args will trigger a cache miss</span>
<span class="token function">selectName</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> ownProps<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// =&gt; sally</span>
state<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&apos;timmy&apos;</span> <span class="token comment" spellcheck="true">// mutation is _still_ ignored</span>
<span class="token function">selectName</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> ownProps<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// =&gt; sally</span>
<span class="token function">selectName</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> ownProps<span class="token punctuation">,</span> <span class="token punctuation">{</span> extra<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// =&gt; timmy</span>

<span class="token comment" spellcheck="true">// 3. passing &quot;different&quot; args will trigger a cache miss</span>
<span class="token function">selectName</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span>ownProps <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// =&gt; timmy</span>

<span class="token comment" spellcheck="true">// 4. passing the same args will return the same value forever</span>
<span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state <span class="token punctuation">}</span>
<span class="token function">selectName</span><span class="token punctuation">(</span>newState<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// =&gt; timmy</span>
<span class="token function">selectName</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// =&gt; billy</span>
newState<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&apos;timmy&apos;</span> <span class="token comment" spellcheck="true">// mutation is _still_ ignored</span>
<span class="token function">selectName</span><span class="token punctuation">(</span>newState<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// =&gt; timmy</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
    
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            

    
    <div class="powered-by-algolia">
        powered by <a href="https://algolia.com" target="_blank"><img src="../../gitbook/gitbook-plugin-algolia/algolia-logo.jpg" /></a>
    </div>
    

        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="composeSelectors.html" class="navigation navigation-prev " aria-label="Previous page: composeSelectors">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="createStateSelector.html" class="navigation navigation-next " aria-label="Next page: createStateSelector">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"memoizeSelector","level":"3.7","depth":1,"next":{"title":"createStateSelector","level":"3.8","depth":1,"path":"docs/api/createStateSelector.md","ref":"docs/api/createStateSelector.md","articles":[]},"previous":{"title":"composeSelectors","level":"3.6","depth":1,"path":"docs/api/composeSelectors.md","ref":"docs/api/composeSelectors.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs","algolia"],"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/heygrady/redux-selectors/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"algolia":{"freeAccount":"false","index":"comfy-redux-selectors-docs","applicationID":"changeme","publicKey":"changeme"},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/heygrady/redux-selectors/tree/master"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Comfy Redux Selectors","gitbook":"3.2.2"},"file":{"path":"docs/api/memoizeSelector.md","mtime":"2018-02-02T01:09:49.194Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-02-26T04:10:22.282Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-algolia/search-algolia.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

